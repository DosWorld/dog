<?php
    $title="DOG - Developer - Source";
  include("../include/head.php");
?>
  
<!-- Left side -->
  
<?php include("../include/src_left.htmlf"); ?>
  
<!-- Right side -->
<TD>
<pre width="80"><font color="#B22222">/*

RM.C - DOG - Alternate command processor for (currently) MS-DOS ver 3.30

Copyright (C) 1999,2000 Wolf Bergenheim

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.

Developers:
Wolf Bergenheim (WB)

History
18.03.00 - Extracted from DOG.C - WB

**************************************************************************/</font>

<strong><font color="#4169E1"><a name="do_rm"></a>void do_rm(BYTE n)</font></strong>
{
    BYTE r,f,i,*p,fn[129]={0},dir[80];
    <font color="#4169E1">struct ffblk</font> *fb;

    <font color="#4169E1">if</font>(n &gt; 1) {
        fb = malloc(<font color="#4169E1">sizeof</font>(<font color="#4169E1">struct ffblk</font>));

        <font color="#4169E1">for</font>(i=1;i&lt;n;i++) {
            <font color="#4169E1">if</font> ((p=strstr(arg[i],<font color="#666666">"*.*"</font>))!=NULL) {
                printf(<font color="#666666">"Removing %s - Are you sure(Y/N)? "</font>,arg[i]);
                <font color="#B22222">/* Get character */</font>
                asm{
                    mov ah,1
                    int 21h
                    mov r,al
                }
                putchar('\n');
                putchar('\r');
            
                <font color="#B22222">/* get to next arg if not 'Y' or 'y' */</font>
                <font color="#4169E1">if</font>((r != 'y') &amp;&amp; (r != 'Y'))
                    <font color="#4169E1">break</font>;
            }
            
            f=findfirst(arg[i],fb,0);

            <font color="#4169E1">if</font>(f!=18) {

                <font color="#4169E1">if</font>(cBreak) {
                    cBreak = 0;
                    <font color="#4169E1">return</font>;
                }

                p = arg[i];
                <font color="#4169E1">for</font>(p+=strlen(arg[i])+1;*p!='\\';p--);
                <font color="#4169E1">if</font>(p&gt;arg[i]) {
                    *(++p)=0;
                    strcpy(fn,arg[i]);
                    strcat(fn,fb-&gt;ff_name);
                }
                <font color="#4169E1">else</font>
                    strcpy(fn,fb-&gt;ff_name);
                    
                r=unlink(fn);

                <font color="#4169E1">if</font>(r==0) {
                    puts(fn);
                }
            }
            <font color="#4169E1">else</font> <font color="#4169E1">if</font>(f==18) {
                printf(<font color="#666666">"%s NOT found.\n"</font>,arg[i]);
            }
            r=findnext(fb);
            <font color="#4169E1">while</font>(r==0) {
                <font color="#4169E1">if</font>(cBreak) {
                    cBreak = 0;
                    <font color="#4169E1">return</font>;
                }

                <font color="#4169E1">for</font>(p+=strlen(arg[i])+1;*p!='\\';p--);
                <font color="#4169E1">if</font>(p&gt;arg[i]) {
                    *(++p)=0;
                    strcpy(fn,arg[i]);
                    strcat(fn,fb-&gt;ff_name);
                }
                <font color="#4169E1">else</font>
                    strcpy(fn,fb-&gt;ff_name);

                r=unlink(fn);
                
                <font color="#4169E1">if</font>(r==0) {
                    puts(fn);
                }
                r=findnext(fb);
            }
        
        }
        free(fb);
    }
        
    <font color="#4169E1">else</font> puts(<font color="#666666">"Invalid number of arguments."</font>);  
    <font color="#4169E1">return</font>;
}


</pre>


<!-- END of Table-->
</TD></tr></table>


</body>
</html>
